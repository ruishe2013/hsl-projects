#macro(errorMessageOrderDetail, $str)
	#if( "$!str" != "")
		<div class="common-error-message">${str}</div>
	#end
#end


<div id="cArea"><!--content begin-->
#errorMessageOrderDetail($!result.message)

<div class="cbox">
    <div class="details_box"><!--details_box begin-->
        
        <div class="details_l">
		    <ul>
		        $control.setTemplate('together/orderInfo.vm').addAttribute('order', $order).addAttribute('joinersCount', $joinersCount).addAttribute('dateUtil', $dateUtil)
		         
		        #if ("$!order.status" != "20" )
		        	#if ($isCreatorSelf)
		            	<li>
		            		<div class="details-state_box">
			                    <span class="fl">
			                        	你是发起人，你可以取消拼车
			                    </span>
			                    <span class="fl ml10">
			                    	  <a href="$snowModule.setTarget('t').add('actionTarget', 'together/orderAction').add('actionEvent', 'cancelOrder').add('orderId', $order.id)" class="but_cancelcar fr confirm_btn">取消拼车</a>
			                    </span>
			                    <div class="cl"></div>
			                </div>
		                </li>
		                #if ($showConfirmOrderBtn)
		                <li>
		                	<div class="details-state_box">
			                    <span class="fl">
			                          	已经有人加入，你可以确认拼车
			                    </span>
			                    <span class="fl ml10">
									<a href="$snowModule.setTarget('t').add('actionTarget', 'together/orderAction').add('actionEvent', 'confirmTogetherOrder').add('orderId', $order.id)" class="but_qrpc fr confirm_btn">确认拼车</a>
			                    </span>
			                    <div class="cl"></div>
			                </div>
						#end
						</li>
					#elseif ($hasBeenJoin)
						<li>
		            		<div class="details-state_box">
			                    <span class="fl">
			                        	你已经加入该拼车，你可以退出拼车
			                    </span>
			                    <span class="fl ml10">
			                    	  <a href="$snowModule.setTarget('t').add('actionTarget', 'together/orderAction').add('actionEvent', 'exitOrder').add('id', $joinedOrderUser.id)" class="but_tcpc fr confirm_btn">退出拼车</a>
			                    </span>
			                    <div class="cl"></div>
			                </div>
		                </li>
					#elseif ("$!userJoinStatusValue" == "0") 
						<li>
		            		<div class="details-state_box">
			                    <span class="fl">
			                        	你的申请还在等发起人确认，请耐心等待；或者你可以退出申请
			                    </span>
			                    <span class="fl ml10">
			                    	  <a href="$snowModule.setTarget('t').add('actionTarget', 'together/orderAction').add('actionEvent', 'exitOrder').add('id', $joinedOrderUser.id)" class="but_tcsq fr confirm_btn">退出申请</a>
			                    </span>
			                    <div class="cl"></div>
			                </div>
		                </li>
					#elseif ($!leftSeatCount <= 0)
						<li>
		            		<div class="details-state_box">
			                    <span class="fl">
			                        	对不起，该拼车的位置已经满了，推荐你
			                    </span>
			                    <span class="fl ml10">
			                    	 <a href="#">去别拼车单看看</a>
			                    </span>
			                    <div class="cl"></div>
			                </div>
		                </li>
					#else
						<li>
		            		<div class="details-state_box">
			                    <span class="fl">
			                        	
			                    </span>
			                    <span class="fl ml10">
			                    	<a href="$snowModule.setTarget('together/personalInfo').add('orderId', $order.id).add('join', 'true')" class="but_addcar fr">加入拼车</a>
			                    </span>
			                    <div class="cl"></div>
			                </div>
		                </li>
						
					#end
		        	
		        #end
		    </ul>
		</div>
        
        $control.setTemplate('together/creatorInfo.vm').addAttribute('creator', $creator).addAttribute('showContactInfo', $showContactInfo)
        
        <div class="hr_6"></div>
    
    	#if ("$!order.status" == "20")
    		<div class="details-state_box">
                <span class="fl">
                    	该拼车单已经完成。
                </span>
                <div class="cl"></div>
            </div>
    	
    	#else
	        <div class="r_c_box">
	            <div class="text_cyr">
	                
	                #if ($showJoiners)
	                	$control.setTemplate('together/joinedUsers.vm').addAttribute('confirmedJoiners', $confirmedJoiners).addAttribute('isCreatorSelf', $isCreatorSelf).addAttribute('order', $order)
	                #end
	                
	                <div class="hr_10"></div>
	                
	                #if ($isCreatorSelf)
	               		$control.setTemplate('together/waitConfirmUsers.vm').addAttribute('waitConfirmJoiners', $waitConfirmJoiners)
	                #end
	                
	            </div>
	        </div>
        #end
        
        
    </div><!--content end-->
</div></div><!--content end-->

<script type="text/javascript">
	$(document).ready(function(){
		$('.confirm_btn').bind('click', function() {
			if (confirm('此操作后不能恢复，确认要这么做吗？')) {
				return true;
			}
			return false;
		});
	});
</script>
